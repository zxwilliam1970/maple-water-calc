
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>楓之谷補品計算器</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f4f4f4; }
        select, input { padding: 5px; margin: 5px; }
        button { padding: 5px 10px; }
    </style>
</head>
<body>
    <h1>楓之谷補品計算器</h1>

    <label>受到傷害（每次）: <input type="number" id="damage" value="1200"></label><br>
    <label>魔心防禦比例(%): <input type="number" id="magic_guard_ratio" value="80"></label><br>

    <label>瞬間移動技能等級:
        <select id="teleport_level">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
        </select>
    </label><br>

    <label>毒霧技能等級:
        <select id="poison_mist_level">
            <option value="0">0</option>
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="30">30</option>
        </select>
    </label><br>

    <button onclick="calculate()">計算</button>

    <div id="result"></div>

    <script>
        const hp_potions = [
            { name: "蘋果(防衛本部)", heal: 30, price: 28, rate: 30/28 },
            { name: "蘋果(其餘地圖)", heal: 30, price: 30, rate: 1 },
            { name: "紅色藥水(防衛本部)", heal: 50, price: 47, rate: 50/47 },
            { name: "紅色藥水(其餘地圖)", heal: 50, price: 50, rate: 1 }
        ];

        const mp_potions = [
            { name: "藍水", heal: 300, price: 200, rate: 300/200 },
            { name: "紅豆刨冰", heal: 1000, price: 600, rate: 1000/600 },
            { name: "礦泉水", heal: 1500, price: 900, rate: 1500/900 }
        ];

        function calculate() {
            const dmg = parseFloat(document.getElementById('damage').value);
            const mg_ratio = parseFloat(document.getElementById('magic_guard_ratio').value) / 100;

            // 魔心防禦公式
            const mp_loss = dmg * mg_ratio;
            const hp_loss = dmg * (1 - mg_ratio);

            // 找最佳補品
            const best_hp = hp_potions.reduce((a, b) => a.rate > b.rate ? a : b);
            const best_mp = mp_potions.reduce((a, b) => a.rate > b.rate ? a : b);

            document.getElementById('result').innerHTML = `
                <h3>計算結果</h3>
                受到傷害: ${dmg}<br>
                HP 損失: ${hp_loss.toFixed(0)}<br>
                MP 損失: ${mp_loss.toFixed(0)}<br>
                推薦 HP 補品: ${best_hp.name} (補 ${best_hp.heal}, 價格 ${best_hp.price})<br>
                推薦 MP 補品: ${best_mp.name} (補 ${best_mp.heal}, 價格 ${best_mp.price})
            `;
        }
    </script>
</body>
</html>
